(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5329],{36786:function(e,t,a){Promise.resolve().then(a.bind(a,40609))},40609:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(57437),n=a(2265),r=a(16463),i=a(38472);function o(){let e=(0,r.useRouter)(),[t,a]=(0,n.useState)(!0),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),h=e=>JSON.parse(decodeURIComponent(atob(e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))),u=async(e,t)=>{try{let a=await i.Z.post("".concat("http://localhost:3000","/bdd/workout/bulk"),{workoutPlans:e},{headers:{Authorization:"Bearer ".concat(t)}});console.log("Workout plans inserted successfully:",a.data)}catch(e){console.error("Error inserting workout plans into the database:",e)}},g=async(e,t)=>{try{let a=await i.Z.post("".concat("http://localhost:3000","/bdd/meal/mealplans"),{mealplans:e},{headers:{Authorization:"Bearer ".concat(t)}});console.log("Meal plans inserted successfully:",a.data)}catch(e){console.error("Error inserting meal plans into the database:",e)}},p=async(e,t)=>{let a={userData:{age:e.age||30,gender:e.gender,weight:e.weight,height:e.height,fitnessLevel:e.fitnessLevel,goals:e.goal?[e.goal]:["muscle gain","improve endurance"],equipment:e.equipment||["barbell","dumbbells"],availability:{daysPerWeek:6,minutesPerDay:90},healthConsiderations:e.healthConsiderations||[]},startDate:new Date().toISOString().split("T")[0],endDate:new Date(new Date().setDate(new Date().getDate()+7)).toISOString().split("T")[0]};try{let e=await i.Z.post("".concat("http://localhost:3000","/ai/workoutplan"),a,{headers:{Authorization:"Bearer ".concat(t)}});console.log("Generated Workout Plans:",e.data),await u(e.data,t)}catch(e){console.error("Error generating workout plans:",e)}},m=async(e,t)=>{let a={userData:{age:e.age||30,gender:e.gender,weight:e.weight,height:e.height,fitnessLevel:e.fitnessLevel,mealsPerDay:3,goal:e.goal?[e.goal]:["muscle gain","improve endurance"],dietaryPreferences:{type:"omnivore",restrictions:["peanuts"],dislikes:["Brussels sprouts","omelettes"]},healthConsiderations:["knee discomfort"]},startDate:new Date().toISOString().split("T")[0],endDate:new Date(new Date().setDate(new Date().getDate()+7)).toISOString().split("T")[0]};try{let e=await i.Z.post("".concat("http://localhost:3000","/ai/mealplans"),a,{headers:{Authorization:"Bearer ".concat(t)}});console.log("Generated Meal Plans:",e.data),await g(e.data,t)}catch(e){console.error("Error generating meal plans:",e)}},x=async(t,s)=>{try{await Promise.all([p(t,s),m(t,s)]),a(!1),e.push("/home")}catch(e){console.error("Error generating or inserting plans:",e),a(!1)}},v=async(e,t)=>{try{a(!0);let s=await i.Z.get("".concat("http://localhost:3000","/bdd/user?email=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});200===s.status?(l(s.data),x(s.data,t)):a(!1)}catch(e){a(!1)}};return(0,n.useEffect)(()=>{let e=(()=>{let e="; ".concat(document.cookie).split("; token=");return 2===e.length?e.pop().split(";").shift():null})();if(e){let t=h(e);d(e),v(t.email,e)}else a(!1)},[]),(0,s.jsx)("div",{className:"min-h-screen relative flex flex-row justify-center bg-white dark:bg-gray-900 dark:text-gray-100",children:t?(0,s.jsx)("div",{className:"absolute top-1/3",children:(0,s.jsx)("div",{className:"loader-container",children:(0,s.jsxs)("div",{className:"loader-boxes",children:[(0,s.jsxs)("div",{className:"box",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"box",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"box",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]}),(0,s.jsxs)("div",{className:"box",children:[(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{}),(0,s.jsx)("div",{})]})]})})}):(0,s.jsx)("div",{className:"content text-xl",children:(0,s.jsxs)("div",{className:"content__container",children:[(0,s.jsx)("p",{className:"content__container__text mt-2.5",children:"G\xe9n\xe9ration"}),(0,s.jsxs)("ul",{className:"content__container__list",children:[(0,s.jsx)("li",{className:"content__container__list__item",children:"Meal Plans"}),(0,s.jsx)("li",{className:"content__container__list__item",children:"Workout Plans"}),(0,s.jsx)("li",{className:"content__container__list__item",children:"Your Program"})]})]})})})}a(25224)},25224:function(){}},function(e){e.O(0,[1842,251,9236,2971,7023,1744],function(){return e(e.s=36786)}),_N_E=e.O()}]);